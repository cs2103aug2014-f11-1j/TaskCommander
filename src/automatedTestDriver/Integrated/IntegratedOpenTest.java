package automatedTestDriver.Integrated;

import static org.junit.Assert.*;

import java.util.Arrays;
import java.util.Calendar;
import java.util.Collection;
import java.util.Date;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;

import com.taskcommander.Global;
import com.taskcommander.TaskCommander;

/**
 * This class contains all test cases for the Integrated Testing of the open method.
 */
//@author A0105753J
@RunWith(Parameterized.class)
public class IntegratedOpenTest {

	private String userCommand;
	private String expectedResult;

	public IntegratedOpenTest(String userCommand, String expectedResult) {
		this.userCommand = userCommand;
		this.expectedResult = expectedResult;
	}
	
	@Before
	public void ini(){
		TaskCommander.ini();
	}

	/*
	 * Test cases for open.
	 * Format: open n (index)
	 */
	@Parameterized.Parameters
	public static Collection<Object[]>  cases() {
		String openCommand[] = {"open","OPEN", "oPen", "opeN"};
		int noOfTestCases = 25;
		String index[] = new String[25];
		for(int i = 0; i < noOfTestCases; i++){
			index[i] = Integer.toString(i);
		}

		Calendar calendar = Calendar.getInstance();
		Date today = calendar.getTime();
		calendar.add(Calendar.DAY_OF_YEAR, 1);
		Date tomorrow = calendar.getTime();
		calendar.setTimeInMillis(today.getTime());
		calendar.add(Calendar.MINUTE, 20);
		Date later = calendar.getTime();
		
		return Arrays.asList(new Object[][] {
				{ openCommand[0], "Invalid command format: "+openCommand[0]+". Type 'help' to see the list of commands."},
				{ openCommand[1], "Invalid command format: "+openCommand[1]+". Type 'help' to see the list of commands."},
				{ openCommand[2], "Invalid command format: "+openCommand[2]+". Type 'help' to see the list of commands."},
				{ openCommand[3], "Invalid command format: "+openCommand[3]+". Type 'help' to see the list of commands."},
				{ openCommand[0]+" "+index[0], "Index does not exist. Please type a valid index."},
				{ openCommand[0]+" "+index[1], "Opened: \"Be patient with friends\""},
				{ openCommand[0]+" "+index[2], "Already opened."},
				{ openCommand[0]+" "+index[3], "Already opened."},
				{ openCommand[0]+" "+index[4], "Already opened."},
				{ openCommand[0]+" "+index[8], "Already opened."},
				{ openCommand[0]+" "+index[15], "Already opened."},
				
				{ openCommand[0]+" "+index[6], "Opened: [Thu Oct 30 '14 "+Global.timeFormat.format(today)+"-Mon Nov 10 '14 "+Global.timeFormat.format(today)+"] \"Finish V0.5 in 10 days\""},
				
				{ openCommand[0]+" "+index[23], "Index does not exist. Please type a valid index."},
				{ openCommand[0]+" "+index[24], "Index does not exist. Please type a valid index."},
		});
	}

   	@Test
	public void testcontainsParameter() {
		assertEquals(expectedResult, TaskCommander.controller.executeCommand(userCommand)); 
	}
}
